<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=7.1.0"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="在学习的路上，不忘初心 方得始终">
<meta property="og:type" content="website">
<meta property="og:title" content="兜兜转转的技术博客">
<meta property="og:url" content="http://fgyong.cn/page/3/index.html">
<meta property="og:site_name" content="兜兜转转的技术博客">
<meta property="og:description" content="在学习的路上，不忘初心 方得始终">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="兜兜转转的技术博客">
<meta name="twitter:description" content="在学习的路上，不忘初心 方得始终">





  
  
  <link rel="canonical" href="http://fgyong.cn/page/3/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>兜兜转转的技术博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">兜兜转转的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">不忘初心 方得始终</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2018/04/16/mac-php5-6+mongdb+Apache环境配置/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/04/16/mac-php5-6+mongdb+Apache环境配置/" class="post-title-link" itemprop="url">PHP5.6+YII+MongoDB环境搭建</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-04-16 15:39:24" itemprop="dateCreated datePublished" datetime="2018-04-16T15:39:24+08:00">2018-04-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-安装php5-6"><a href="#1-安装php5-6" class="headerlink" title="1.安装php5.6"></a>1.安装php5.6</h3><h5 id="1-先安装brew，要是不确定是否已经安装了brew，可以先运行brew-v查看版本，有版本号的话直接下一步，报错的话安装brew。"><a href="#1-先安装brew，要是不确定是否已经安装了brew，可以先运行brew-v查看版本，有版本号的话直接下一步，报错的话安装brew。" class="headerlink" title="1.先安装brew，要是不确定是否已经安装了brew，可以先运行brew -v查看版本，有版本号的话直接下一步，报错的话安装brew。"></a>1.先安装brew，要是不确定是否已经安装了brew，可以先运行<code>brew -v</code>查看版本，有版本号的话直接下一步，报错的话安装brew。</h5><p>安装命令是<code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code>有其他问题可以查看<a href="https://brew.sh/index_zh-cn" target="_blank" rel="external">brew官方安装方法</a>。</p>
<h5 id="2-搜索PHP"><a href="#2-搜索PHP" class="headerlink" title="2.搜索PHP"></a>2.搜索PHP</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew search php</div></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/783986-58be6a637b83983b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="brew search php"></p>
<h3 id="3-安装PHP"><a href="#3-安装PHP" class="headerlink" title="3.安装PHP"></a>3.安装PHP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install php@5.6</div></pre></td></tr></table></figure>
<p>OK，安装完成。</p>
<h3 id="2-安装MongoDB"><a href="#2-安装MongoDB" class="headerlink" title="2.安装MongoDB"></a>2.安装MongoDB</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">sudo brew install mongodb #安装MongoDB</div><div class="line"></div><div class="line">sudo mongod #启动</div><div class="line"></div><div class="line"># 如果没有创建全局路径 PATH，需要进入以下目录</div><div class="line">cd /usr/local/mongodb/bin</div><div class="line">sudo ./mongod</div><div class="line"></div><div class="line"></div><div class="line">$ cd /usr/local/mongodb/bin </div><div class="line">$ ./mongo</div><div class="line">MongoDB shell version v3.4.2</div><div class="line">connecting to: mongodb://127.0.0.1:27017</div><div class="line">MongoDB server version: 3.4.2</div><div class="line">Welcome to the MongoDB shell.</div><div class="line">……</div><div class="line">&gt; 1 + 1</div><div class="line">2</div><div class="line">&gt;</div></pre></td></tr></table></figure>
<h3 id="3-配置Apache"><a href="#3-配置Apache" class="headerlink" title="3.配置Apache"></a>3.配置Apache</h3><p>不知道mac的Apache目录的可以使用命令<code>which apache</code>，一般的配置文件目录是<code>/etc/apache2</code>，Apahce启动的时候读的文件是http.conf，现在我们配置http.conf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">因为我配置了两个web，所以监听 80 和 81</div><div class="line">  Listen 80</div><div class="line">  Listen 81</div><div class="line">#加载PHP动态库的配置，如果是用的PHP7.1或者其他版本，路径改为相对应版本的路径。加入是使用brew安装的PHP5.6的话，路径应该是我的路径。</div><div class="line">#PHP7.1的路径</div><div class="line">LoadModule php7_module libexec/apache2/libphp7.so</div><div class="line">#php5.6的路径</div><div class="line"> LoadModule php5_module /usr/local/opt/php@5.6/lib/httpd/modules/libphp5.so</div><div class="line"></div><div class="line">&lt;VirtualHost *:81&gt;    #ServerAdmin demo@demo.com    </div><div class="line"> DocumentRoot &quot;/Users/Jerry/Desktop/s/api/web&quot;    </div><div class="line"> ServerName demo.com         </div><div class="line">&lt;Directory &quot;/Users/Jerry/Desktop/s/api/web&quot;&gt;   </div><div class="line">      Options +Indexes +Includes +FollowSymLinks +MultiViews     </div><div class="line">    AllowOverride All         Require local         Require all granted       </div><div class="line">  IndexIgnore */*         RewriteEngine on         RewriteCond %</div><div class="line">&#123;REQUEST_FILENAME&#125; !-f         RewriteCond %</div><div class="line">&#123;REQUEST_FILENAME&#125; !-d         RewriteRule . index.php       </div><div class="line">&lt;/Directory&gt;    </div><div class="line"> ErrorLog &quot;/private/var/log/apache2/demo.com-</div><div class="line">error_log&quot;    </div><div class="line"> CustomLog &quot;/private/var/log/apache2/demo.com-</div><div class="line">access_log&quot; common</div><div class="line"> &lt;/VirtualHost&gt;</div><div class="line">            AllowOverride None         Require all granted    </div><div class="line">     IndexIgnore */*         RewriteEngine on         RewriteCond %</div><div class="line">&#123;REQUEST_FILENAME&#125; !-f         RewriteCond %</div><div class="line">&#123;REQUEST_FILENAME&#125; !-d         RewriteRule . index.php     </div><div class="line">&lt;/Directory&gt;  </div><div class="line">   ErrorLog &quot;/private/var/log/apache2/demo2.com-error_log&quot;  </div><div class="line">   CustomLog &quot;/private/var/log/apache2/demo2.com-access_log&quot; </div><div class="line">common &lt;/VirtualHost&gt;</div></pre></td></tr></table></figure></p>
<p>配置好Apache需要重新启动，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo /usr/sbin/apachectl restart #重新启动</div><div class="line">sudo /usr/sbin/apachectl start#启动</div><div class="line">sudo /usr/sbin/apachectl stop#停止</div></pre></td></tr></table></figure></p>
<p>在<br><code>/Users/Jerry/Desktop/s/api/web</code>新建index.html，内容是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">phpinfo();</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p>添加url到hosts<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">vi  /etc/hosts</div><div class="line">#添加 </div><div class="line">127.0.0.7 demo.com</div><div class="line">#保存退出</div><div class="line">:wq</div><div class="line">#刷新hosts立即生效</div><div class="line">source /etc/hosts</div></pre></td></tr></table></figure></p>
<p>在浏览器中输入<a href="http://demo.com/,回车，出来的界面是" target="_blank" rel="external">http://demo.com/,回车，出来的界面是</a><br><img src="https://upload-images.jianshu.io/upload_images/783986-e1b5fda1f7385967.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PHPinfo"><br>这就代表运行成功了，其实这个界面包含很多配置信息，左边是参数，右边是值，例如：<br>Server API 值是Apache 2.0Handler。</p>
<p>已经有项目的，可以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git clone git地址 dirName #克隆仓库</div><div class="line">cd ./dicNme #进入工程文件</div><div class="line">composer install #安装 composer</div></pre></td></tr></table></figure></p>
<p>有什么疑问的小伙伴可以留言哦。<br>更多博客在www.fgyong.cn可见。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2017/05/08/排序算法/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/08/排序算法/" class="post-title-link" itemprop="url">排序算法</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-05-08 16:39:24" itemprop="dateCreated datePublished" datetime="2017-05-08T16:39:24+08:00">2017-05-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="排序算法"><a href="#排序算法" class="headerlink" title="排序算法"></a>排序算法</h2><ul>
<li>冒泡排序</li>
<li>选择排序</li>
<li>直接插入排序</li>
<li>希尔排序</li>
<li>快速排序</li>
</ul>
<h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><blockquote>
<p>冒泡排序是一种交换排序，基本思想是两两相邻的记录的关键字，如果反序则交换，知道没有反序为止。</p>
</blockquote>
<p>冒泡排序的复杂度是n(n-1)/2,就是o(n²)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/*对顺序列表排序*/</div><div class="line">-(void)sort:(NSMutableArray *)list&#123;</div><div class="line">    NSInteger i , j;</div><div class="line">    for (i = 0; i &lt; list.count; i ++) &#123;</div><div class="line">        for (j = list.count-1; j&gt;=i; j --) &#123;</div><div class="line">            if (list[j] &gt; list[i]) &#123;</div><div class="line">                /*</div><div class="line">                 交换obj</div><div class="line">                 */</div><div class="line">                [list exchangeObjectAtIndex:i withObjectAtIndex:j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><blockquote>
<p>简单选择排序法是通过n-i次关键字间的比较，从n-i+1个记录选出关键字最小的记录，并和第i（1=《i《=n）交换之。</p>
</blockquote>
<p>选择排序复杂度是n（n-1）/2,就是o（n²），性能略优于冒泡。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">-(void)sort:(NSMutableArray *)list&#123;</div><div class="line">    NSInteger i , j , min;</div><div class="line">    for (i = 1; i &lt; list.count; i ++) &#123;</div><div class="line">        min = i; //默认最小值是第一个</div><div class="line">        for (j = i + 1; j &lt;= list.count; j ++) &#123;</div><div class="line">            if (list[min]  &gt;  list[j] ) &#123;</div><div class="line">                min = j; //记录最小值的索引</div><div class="line">                </div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if (min != i) &#123;// 出现最小的值的时候 和上个最小的值交换位置</div><div class="line">            /*</div><div class="line">             交换obj</div><div class="line">             */</div><div class="line">            [list exchangeObjectAtIndex:i withObjectAtIndex:j];</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###直接插入排序算法</p>
<blockquote>
<p>直接插入排序的基本操作是将一个记录插入到已经排好的有序表中，从而得到一个新的，记录增加1的有序表。</p>
</blockquote>
<p>直接插入排序时间复杂度是（n+4）（n-1）/2，就是o（n²）。<br>性能略优于选择排序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">-(void)sort2:(NSMutableArray *)list&#123;</div><div class="line">    NSInteger i , j ;</div><div class="line">    for (i = 1; i &lt; list.count; i ++) &#123;</div><div class="line">       </div><div class="line">        if (list[i-1] &lt; list[i]) &#123;// i-1 小于 i</div><div class="line">             NSInteger data = [list[i] integerValue];//设置哨兵</div><div class="line">            for (j = i - 1; j &gt;= 0 &amp;&amp; [list[j] integerValue] &lt; data  ; j --) &#123;</div><div class="line">                list[j+1] = list[j];//向后移动一位</div><div class="line">            &#125;</div><div class="line">            if (data) &#123;</div><div class="line">                 list[j+1] =@(data);//哨兵赋值</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h3><blockquote>
<p>希尔排序是把记录按下标的一定增量分组，对每组使用直接插入排序算法排序；随着增量逐渐减少，每组包含的关键词越来越多，当增量减至1时，整个文件恰被分成一组，算法便终止。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//希尔排序算法</div><div class="line">-(void)shellSort:(NSMutableArray *)list&#123;</div><div class="line">    NSInteger i , j ;</div><div class="line">    NSInteger inrement = list.count;</div><div class="line">    do &#123;</div><div class="line">        inrement = inrement/3 + 1;//增量序列</div><div class="line">        for (i = inrement+1; i &lt; list.count; i ++) &#123;</div><div class="line">            if (list[i]&lt;list[i-inrement]) &#123;</div><div class="line">                //需将list[i] 插入有序增量字表</div><div class="line">                NSNumber  * data = list[i];</div><div class="line">                for (j = i - inrement; j &gt;0 &amp;&amp; data &lt; list[j]; j-= inrement) &#123;</div><div class="line">                    list[j+inrement] = list[j];//记录后移</div><div class="line">                &#125;</div><div class="line">                list[j+inrement] = data;//插入</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;while (inrement &gt; 1);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>希尔排序和直接插入排序有异曲同工之妙，都是记录后移，都是插入排序。不过希尔用的条件是步长，步长越来越短，直到是1，而直接插入排序是直接是1，循环次数多。<br>时间复杂度是o(n的二分之三次方)，优于o（n²）。</p>
<h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><blockquote>
<p>基本思想是:通过一趟排序将带排序记录分割成独立的两部分，其中一部分记录的关键字均比另外一部分的关键字小，则可分别对着两部分重新排序，以达到整个序列的有序的目的。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">// 快速排序</div><div class="line">-(void)quickSort:(NSMutableArray *)list&#123;</div><div class="line">    [self qsort:list low:0 hight:list.count-1];</div><div class="line">&#125;</div><div class="line">-(void)qsort:(NSMutableArray *)list low:(NSInteger)low hight:(NSInteger ) hight&#123;</div><div class="line">    NSInteger pt;</div><div class="line">    if (low &lt; hight) &#123;</div><div class="line">        pt =[self partition:list low:low high:hight];//将整个序列一分为二</div><div class="line">        [self qsort:list low:low hight:pt -1];//对低子表递归排序</div><div class="line">        [self qsort:list low:pt + 1 hight:hight];//对高字表递归排序</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">//返回在他前后记录均不大（小）与他。</div><div class="line">-(NSInteger)partition:(NSMutableArray *)list low:(NSInteger)low high:(NSInteger)high&#123;</div><div class="line">    NSNumber * data = list[low];</div><div class="line">    while (low &lt; high) &#123;</div><div class="line">        while (low &lt; high &amp;&amp; list[high] &gt;= data)// 倒叙 找出比data小的 并交换位置</div><div class="line">            high --;</div><div class="line">            [list exchangeObjectAtIndex:low withObjectAtIndex:high];</div><div class="line">        </div><div class="line">        while (low &lt; high &amp;&amp; list[low] &lt;= data)//正序 找出比data大的 并交换位置</div><div class="line">            low ++;</div><div class="line">         [list exchangeObjectAtIndex:low withObjectAtIndex:high];</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    return low;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>时间复杂度是o（n²）空间复杂度是o（log n）。</p>
<p>优化选择枢轴<br>三数取中发，就是取三个关键字排序，将中间的数作为枢轴，一般是取左，右，中间三个数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">  data = list[low];</div><div class="line"></div><div class="line">将上面的一行改成下边的：</div><div class="line"></div><div class="line">NSNumber * data;</div><div class="line">    NSInteger m = low + (high + low)/2;</div><div class="line">    if (list[low] &gt; list[high]) &#123;</div><div class="line">        [list exchangeObjectAtIndex:low withObjectAtIndex:high];</div><div class="line">    &#125;</div><div class="line">    if (list[m] &gt; list[high]) &#123;</div><div class="line">        [list exchangeObjectAtIndex:m withObjectAtIndex:high];</div><div class="line">    &#125;</div><div class="line">    if (list[m] &gt; list[low]) &#123;</div><div class="line">        [list exchangeObjectAtIndex:m withObjectAtIndex:low];</div><div class="line">    &#125;</div><div class="line">    data = list[low];</div></pre></td></tr></table></figure></p>
<p>优化不必要的交换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">//返回在他前后记录均不大（小）与他。</div><div class="line">-(NSInteger)partition:(NSMutableArray *)list low:(NSInteger)low high:(NSInteger)high&#123;</div><div class="line">    NSNumber * data;</div><div class="line">    NSInteger m = low + (high - low)/2;</div><div class="line">    if (list[low] &gt; list[high]) &#123;</div><div class="line">        [list exchangeObjectAtIndex:low withObjectAtIndex:high];</div><div class="line">    &#125;</div><div class="line">    if (list[m] &gt; list[high]) &#123;</div><div class="line">        [list exchangeObjectAtIndex:m withObjectAtIndex:high];</div><div class="line">    &#125;</div><div class="line">    if (list[m] &gt; list[low]) &#123;</div><div class="line">        [list exchangeObjectAtIndex:m withObjectAtIndex:low];</div><div class="line">    &#125;</div><div class="line">    data = list[low];//取出来适当的关键字</div><div class="line">    while (low &lt; high) &#123;</div><div class="line">        while (low &lt; high &amp;&amp; list[high] &gt;= data)// 倒叙 找出比data小的 并交换位置</div><div class="line">            high --;</div><div class="line">        list[low] = list[high];  //将 上面的交换改成直接赋值</div><div class="line">        </div><div class="line">        while (low &lt; high &amp;&amp; list[low] &lt;= data)//正序 找出比data大的 并交换位置</div><div class="line">            low ++;</div><div class="line">         list[high ] = list[low];   //将 上面的交换改成直接赋值</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    list[low] = data; //最后 将关键字 赋值给low的位置</div><div class="line">    return low;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2017/05/07/二叉树的4种遍历/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/05/07/二叉树的4种遍历/" class="post-title-link" itemprop="url">二叉树的4种遍历</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-05-07 16:39:24" itemprop="dateCreated datePublished" datetime="2017-05-07T16:39:24+08:00">2017-05-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><blockquote>
<p>定义:二叉树是n（n&gt;0）个节点的有限集合，该集合或者为空集（空二叉树）,或者由一个根节点和两棵互不相交分别称为根节点的左子树和右子树的二叉树组成。</p>
</blockquote>
<p><strong><em> 注意：</em></strong></p>
<ul>
<li>n&gt;0 时节点是唯一的，不可能存在多个节点，别和现实中的树木混在一起。</li>
<li>m&gt;0 时，子树的个数没有限制，但是一定是不交互的。</li>
</ul>
<h2 id="树的四种遍历"><a href="#树的四种遍历" class="headerlink" title="树的四种遍历"></a>树的四种遍历</h2><blockquote>
<p>遍历：二叉树的遍历是指从根节点出发,按照某种次序依次访问二叉树中所有节点,使得每个节点被访问依次且被访问依次。</p>
</blockquote>
<ul>
<li>前序遍历</li>
<li>中序遍历</li>
<li>后序遍历</li>
<li>层序遍历</li>
</ul>
<h3 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a>前序遍历</h3><blockquote>
<p>定义：规则是若二叉树为空，则空操作返回。 否则先访问跟节点，然后前序遍历左子树，再遍历右子树。优先级：根-&gt;左-&gt;右</p>
</blockquote>
<h3 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h3><blockquote>
<p>定义：规则是树若为空，操作返回，否则从根节点开始，中序遍历(注意并不是访问根节点)根节点的左子树，然后访问根节点，最后中序遍历右子树。优先级：左-&gt;根-&gt;右</p>
</blockquote>
<h3 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h3><blockquote>
<p>定义：规则是若树空,操作返回，否则是从左到右先叶子后节点的方式遍历访问左右子树，最后是访问跟节点。优先级：左-&gt;右-&gt;根</p>
</blockquote>
<h3 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h3><blockquote>
<p>定义：规则是若树空,操作返回，否则是从树的第一层，也就是从根节点开始访问，从上而下逐层遍历，在同一层中，从左到右的顺序对节点逐个访问。优先级：左-&gt;右-&gt;根</p>
</blockquote>
<h2 id="代码示例4中遍历"><a href="#代码示例4中遍历" class="headerlink" title="代码示例4中遍历"></a>代码示例4中遍历</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">这四种遍历示例：   </div><div class="line"></div><div class="line">             A</div><div class="line">          /    \</div><div class="line">        B        C</div><div class="line">      /  \      /  \ </div><div class="line">     D    E     F   G  </div><div class="line"> 层序遍历结果是:  ABCDEFG</div><div class="line"> 前序遍历结果是:  ABDECFG</div><div class="line"> 中序遍历结果是:  DBEAFCG</div><div class="line"> 后序遍历结果是:  DEBFGCA</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//节点对象</div><div class="line">@interface Node : NSObject</div><div class="line"></div><div class="line">@property (nonatomic) NSInteger data;//存储的数据</div><div class="line"></div><div class="line">@property (nonatomic) Node * leftNode; //左节点</div><div class="line"></div><div class="line">@property (nonatomic) Node * rightNode; //右节点</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation Node</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>每一种遍历其实都是递归，只是递归的时候，处理数据的代码时机不一样。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//前序 遍历</div><div class="line">/*</div><div class="line"> 规则是若二叉树为空，则空操作返回。 否则先访问跟节点，然后前序遍历左子树，再遍历右子树。跟-&gt;左-&gt;右</div><div class="line"> </div><div class="line"> */</div><div class="line">-(void)printNode:(Node *)node&#123;</div><div class="line">    if (node == nil) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    NSLog(@&quot;%ld&quot;,node.data);</div><div class="line">    [self printNode:node.leftNode];</div><div class="line">    [self printNode:node.rightNode];</div><div class="line">&#125;</div><div class="line">// 中序遍历   从 左子树【左-&gt;跟-&gt;右】</div><div class="line">-(void)printCenterNode:(Node *)node&#123;</div><div class="line">    if (node == nil) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    [self printCenterNode:node.leftNode];</div><div class="line">     NSLog(@&quot;%ld&quot;,node.data);</div><div class="line">    [self printCenterNode:node.rightNode];</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 后序遍历   从 左子树【左-&gt;右-&gt;跟】</div><div class="line">-(void)print2Node:(Node *)node&#123;</div><div class="line">    if (node == nil) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    [self print2Node:node.leftNode];</div><div class="line">    [self print2Node:node.rightNode];</div><div class="line">    NSLog(@&quot;%ld&quot;,node.data);//节点数据可以进行其他操作</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*</div><div class="line"> 层序遍历暂时没有代码示例。</div><div class="line"> */</div><div class="line"></div><div class="line">//构造节点</div><div class="line">-(Node *)randNode&#123;</div><div class="line">    Node * node =[Node new];</div><div class="line">    node.data = rand()%20 + 1;</div><div class="line">    return node;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2016/11/21/iOS之Safari之添加到主屏幕应用/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/21/iOS之Safari之添加到主屏幕应用/" class="post-title-link" itemprop="url">iOS之Safari之添加到主屏幕应用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-21 16:39:24" itemprop="dateCreated datePublished" datetime="2016-11-21T16:39:24+08:00">2016-11-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>先写好的DemoHtml先需要在手机上试验一下，结果mac上面的文件不能用手机打开，我就想了个办法，直接开一个服务，把mac当成服务器访问服务器上面的文件，这个问题就解决了。</p>
<h3 id="1-启动mac-py-服务"><a href="#1-启动mac-py-服务" class="headerlink" title="1.启动mac py 服务"></a>1.启动mac py 服务</h3><p>首先进入到你要共享的文件夹，直接运行下边的命令，然后就可以再手机浏览器中查看mac上面的电脑了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python -m SimpleHTTPServer 8000  启动本地端口8000</div></pre></td></tr></table></figure></p>
<h3 id="2-查看电脑IP-局域网的ip"><a href="#2-查看电脑IP-局域网的ip" class="headerlink" title="2.查看电脑IP[局域网的ip]"></a>2.查看电脑IP[局域网的ip]</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">我的是：192.168.99.1</div></pre></td></tr></table></figure>
<h3 id="3-手机Safari打开"><a href="#3-手机Safari打开" class="headerlink" title="3.手机Safari打开"></a>3.手机Safari打开</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.99.1:8000</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/783986-f559dd371ab3227d.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IMG_0853.PNG"></p>
<h3 id="4-js代码"><a href="#4-js代码" class="headerlink" title="4.js代码"></a>4.js代码</h3><p>html代码和正常的布局一样，想要什么样子自己可以随意写，这里只是提供了比较特殊的 js代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    var alone = window.navigator.standalone;//是否是从桌面启动</div><div class="line">   var url = &quot;taobao&quot;; //url可以换成自己的</div><div class="line">        if(alone)&#123;</div><div class="line">        window.open(url+&quot;:&quot;,&apos;_self&apos;);//打开淘宝app url可以换成自己的app scheme</div><div class="line">    &#125;     else &#123;  </div><div class="line">      window.open(url+&quot;:&quot;,&apos;_self&apos;);  </div><div class="line">  &#125;&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>打开这个html文件点击Safari保存到主屏幕。<br>在此打开之后的效果：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/783986-bb3c3fadbd9cf618.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IMG_0854.PNG"></p>
<p>其实做这个功能就是方面用户直接点击icon启动app并且调用某个功能，省了不少时间。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2016/11/05/微信小程序_02/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/05/微信小程序_02/" class="post-title-link" itemprop="url">微信小程序_2</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-05 16:39:24" itemprop="dateCreated datePublished" datetime="2016-11-05T16:39:24+08:00">2016-11-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/微信小程序/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-swiper的使用"><a href="#1-swiper的使用" class="headerlink" title="1.swiper的使用"></a>1.swiper的使用</h2><p>这个类似iOS的滚动视图，里边也可以放一下其他的东西。<br>先讲一下属性：</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th style="text-align:center">类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>indicator-dots</td>
<td style="text-align:center">Boolean</td>
<td>false</td>
<td>是否显示面板指示点</td>
</tr>
<tr>
<td>autoplay</td>
<td style="text-align:center">Boolean</td>
<td>false</td>
<td>是否自动切换</td>
</tr>
<tr>
<td>current</td>
<td style="text-align:center">Number</td>
<td>0</td>
<td>当前所在页面的 index</td>
</tr>
<tr>
<td>interval</td>
<td style="text-align:center">Number</td>
<td>5000</td>
<td>自动切换时间间隔</td>
</tr>
<tr>
<td>duration</td>
<td style="text-align:center">Number</td>
<td>1000</td>
<td>滑动动画时长</td>
</tr>
<tr>
<td>bindchange</td>
<td style="text-align:center">EventHandle</td>
<td></td>
<td>current 改变时会触发 change 事件，event.detail = {current: current}</td>
</tr>
</tbody>
</table>
<h3 id="swiper-js文件"><a href="#swiper-js文件" class="headerlink" title="swiper.js文件"></a>swiper.js文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">var app = getApp();</div><div class="line">Page(&#123;</div><div class="line">  data:&#123;</div><div class="line">    indicatordos:true,</div><div class="line">    autoplay:true,</div><div class="line">/*图片数组*/</div><div class="line">    imgUrls: [</div><div class="line">      &apos;http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg&apos;,</div><div class="line">      &apos;http://img06.tooopen.com/images/20160818/tooopen_sy_175866434296.jpg&apos;,</div><div class="line">      &apos;http://img06.tooopen.com/images/20160818/tooopen_sy_175833047715.jpg&apos;,</div><div class="line">      &apos;http://imgsrc.baidu.com/forum/pic/item/1080fc8b87d6277f026c80b428381f30e824fc46.jpg&apos;,</div><div class="line">      &apos;http://imgsrc.baidu.com/forum/pic/item/2eadcbef76094b366ac0bf0da3cc7cd98c109d84.jpg&apos;,</div><div class="line">      &apos;http://img1.tgbusdata.cn/v2/thumb/jpg/MGNlNiw3MzAsNzMwLDQsMSwxLC0xLDAscms1MA==/u/olpic.tgbusdata.cn/uploads/allimg/130124/62-130124160054.jpg&apos;</div><div class="line">    ],</div><div class="line">    vertical:true,</div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  displaychange:function(event)&#123;</div><div class="line">      console.log(event.detail.current);//输出来当前swiper-item的index</div><div class="line">   &#125;,</div><div class="line"></div><div class="line">  changeautodisplay:function()&#123;</div><div class="line">    this.setData(&#123;</div><div class="line">      autoplay:!this.data.autoplay//设置是否自动播放</div><div class="line">  &#125;)</div><div class="line">  &#125;,</div><div class="line">  changeindicator:function()&#123;</div><div class="line">    this.setData(&#123;</div><div class="line">  indicatordos:!this.data.indicatordos//隐藏图片那个点</div><div class="line">&#125;)</div><div class="line">  &#125;,</div><div class="line">  changevertical:function()&#123;</div><div class="line">    this.setData(&#123;//设置水平方向</div><div class="line">      vertical:!this.data.vertical</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h4 id="swiper-xml文件"><a href="#swiper-xml文件" class="headerlink" title="swiper.xml文件"></a>swiper.xml文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;view class=&quot;container&quot;&gt;</div><div class="line">    &lt;view class=&quot;swiperview&quot;&gt;</div><div class="line">        &lt;swiper class=&quot;swiperitem&quot; indicator-dots=&quot;&#123;&#123;indicatordos&#125;&#125;&quot; autoplay=&quot;&#123;&#123;autoplay&#125;&#125;&quot;</div><div class="line">          bindchange=&quot;displaychange&quot; duration=&quot;1000&quot; interval=&quot;2000&quot;</div><div class="line">          vertical=&quot;&#123;&#123;vertical&#125;&#125;&quot;</div><div class="line">        &gt;</div><div class="line">        &lt;block wx:for=&quot;&#123;&#123;imgUrls&#125;&#125;&quot;&gt;</div><div class="line">            &lt;swiper-item&gt;</div><div class="line">                &lt;image src=&quot;&#123;&#123;item&#125;&#125;&quot;&gt;&lt;/image&gt;</div><div class="line">            &lt;/swiper-item&gt;</div><div class="line">        &lt;/block&gt;</div><div class="line">        &lt;/swiper&gt;</div><div class="line">    &lt;/view&gt;</div><div class="line">    &lt;view vlass=&quot;bottomview&quot;&gt;</div><div class="line">        &lt;button type=&quot;default&quot; bindtap=&quot;changeautodisplay&quot; class=&quot;bottomButton&quot;&gt;autodisplay:&#123;&#123;autoplay?&quot;YES&quot;:&quot;NO&quot;&#125;&#125;&lt;/button&gt;</div><div class="line">        &lt;button type=&quot;default&quot; bindtap=&quot;changeindicator&quot; class=&quot;bottomButton&quot;&gt;indicatordots:&#123;&#123;autoplay?&quot;YES&quot;:&quot;NO&quot;&#125;&#125;&lt;/button&gt;</div><div class="line">        &lt;button type=&quot;default&quot; bindtap=&quot;changevertical&quot; class=&quot;bottomButton&quot;&gt;水平:&#123;&#123;autoplay?&quot;YES&quot;:&quot;NO&quot;&#125;&#125;&lt;/button&gt;</div><div class="line">//这里边用了一个简单的判断语句 :&#123;&#123;autoplay?&quot;YES&quot;:&quot;NO&quot;</div><div class="line">    &lt;/view&gt;</div><div class="line">&lt;/view&gt;</div></pre></td></tr></table></figure>
<p>效果如下:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/783986-f75545234a080c18.gif?imageMogr2/auto-orient/strip" alt="2016-11-07 17_27_56.gif"></p>
<h2 id="2-checkbox的使用"><a href="#2-checkbox的使用" class="headerlink" title="2.checkbox的使用"></a>2.checkbox的使用</h2><p>其实就是复选框：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/783986-26e5a47de1bf531a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="E935B5E6-0FC3-4A00-813C-9A259C2582AE.png"><br>下边用了text显示了当前选中的name。<br><strong>js文件</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">首先要设置data的list</div><div class="line">Page(&#123;</div><div class="line">  data:&#123;</div><div class="line">     items: [</div><div class="line">      &#123;name: &apos;USA&apos;, value: &apos;美国&apos;&#125;,</div><div class="line">      &#123;name: &apos;CHN&apos;, value: &apos;中国&apos;, checked: &apos;true&apos;&#125;,</div><div class="line">      &#123;name: &apos;BRA&apos;, value: &apos;巴西&apos;&#125;,</div><div class="line">      &#123;name: &apos;JPN&apos;, value: &apos;日本&apos;&#125;,</div><div class="line">      &#123;name: &apos;ENG&apos;, value: &apos;英国&apos;&#125;,</div><div class="line">      &#123;name: &apos;TUR&apos;, value: &apos;法国&apos;&#125;,</div><div class="line">    ],</div><div class="line">    text:&apos;&apos;,//用来显示选中的box</div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  onShow:function()&#123;</div><div class="line">    // 页面显示 第一次进入页面统计选中的box 调用函数。</div><div class="line">    this.check();</div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  change:function(e)&#123;</div><div class="line">      console.log(e.detail.value);</div><div class="line">      var te=&quot;暂时没选中&quot;;</div><div class="line">      if(e.detail.value.length == 0)</div><div class="line">        &#123; </div><div class="line">        &#125; else &#123;</div><div class="line">         te = e.detail.value;</div><div class="line">        &#125;</div><div class="line">         this.setData(&#123;</div><div class="line">        text:te</div><div class="line">      &#125;)</div><div class="line">      </div><div class="line">  &#125;,</div><div class="line">********遍历是否有选中的***********</div><div class="line">  check:function()&#123;</div><div class="line">    var te=&quot;&quot;;//遍历是否有选中的</div><div class="line">    for(var i = 0;i &lt; this.data.items.length;i ++)&#123;</div><div class="line">      var item = this.data.items[i];</div><div class="line">      if(item.checked)&#123; //如果选中 加到字符串中</div><div class="line">        te += item.value;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">      if(te.length == 0)</div><div class="line">        &#123; </div><div class="line">         te = &quot;暂时没选中&quot; ;</div><div class="line">        &#125;</div><div class="line">         this.setData(&#123;</div><div class="line">        text:te</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p><strong>xml文件</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;view class = &quot;contain&quot;&gt;</div><div class="line">    &lt;view class=&quot;bd&quot;&gt;</div><div class="line">        &lt;checkbox-group bindchange=&quot;change&quot;&gt; //绑定事件</div><div class="line">            &lt;label class=&quot;checkbox&quot; wx:for=&quot;&#123;&#123;items&#125;&#125;&quot;&gt;//循环绑定到item</div><div class="line">                &lt;checkbox value=&quot;&#123;&#123;item.value&#125;&#125;&quot; checked=&quot;&#123;&#123;item.checked&#125;&#125;&quot;</div><div class="line">                &gt; </div><div class="line">                &#123;&#123;item.value&#125;&#125;</div><div class="line">                &lt;/checkbox&gt;</div><div class="line">            &lt;/label&gt;</div><div class="line">        &lt;/checkbox-group&gt;</div><div class="line">    &lt;/view&gt;</div><div class="line"></div><div class="line">    &lt;view class=&quot;checkfooter&quot;&gt;</div><div class="line">    &lt;text &gt;&#123;&#123;text&#125;&#125;&lt;/text&gt;//显示选中的数据的name</div><div class="line">    &lt;/view&gt;</div><div class="line">&lt;/view&gt;</div></pre></td></tr></table></figure></p>
<p><strong>css文件</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">.bd&#123;</div><div class="line">    width: 800rpx;</div><div class="line">    height: 500rpx;</div><div class="line">    margin-left: 50rpx;</div><div class="line">&#125;</div><div class="line">.checkbox&#123;</div><div class="line">   display: block;//这个要一定写的 暂时没搞懂意思  应该是一种布局方式。</div><div class="line">   margin: 20;</div><div class="line">&#125;</div><div class="line">.checklabel&#123;</div><div class="line">    width: 500rpx;</div><div class="line">    height: 200rpx;</div><div class="line">&#125;</div><div class="line">.checkfooter&#123;</div><div class="line">    margin-left: 50rpx;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>效果如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/783986-274e66a04bdd68da.gif?imageMogr2/auto-orient/strip" alt="2016-11-07 17_13_36.gif"></p>
<p>很多代码的地方都写了注释，有什么不懂或者疑问，欢迎来吐槽！<br><a href="https://github.com/ifgyong/WeChatDemo" target="_blank" rel="external">demo地址</a><br><a href="http://fgyong.cn/2016/11/04/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F_01/">微信小程序_01</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2016/11/04/微信小程序_01/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/04/微信小程序_01/" class="post-title-link" itemprop="url">微信小程序_1</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-04 16:39:24" itemprop="dateCreated datePublished" datetime="2016-11-04T16:39:24+08:00">2016-11-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/微信小程序/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.下载微信小程序编辑器：<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html?t=20161102" target="_blank" rel="external">下载微信小程序编辑器</a></p>
<p>2.创建小程序应用：打开刚才下载的dmg，用微信扫面二维码登陆。点击本地小程序项目，就可以开始开发了。</p>
<p>3.先介绍下目录结构：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/783986-d6c985cf217cfe83.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="F6B51227-E9DB-433B-86E3-336916B6E88B.png"><br>pages文件夹中放的都是页面，app.js相当于iOS的appdelegate,app.json就是app的配置,app.wxss就是css样式文件。<br>每一个页面都单独有一个js，json，wxss文件。<br>4.app.json文件分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;//所有的页面都在这里列出来</div><div class="line">  &quot;pages&quot;:[</div><div class="line">    &quot;pages/index/index&quot;,</div><div class="line">    &quot;pages/logs/logs&quot;,</div><div class="line">    &quot;pages/button/button&quot;</div><div class="line">  ],</div><div class="line">  &quot;window&quot;:&#123; //app的样式</div><div class="line">    &quot;backgroundTextStyle&quot;:&quot;light&quot;,</div><div class="line">    &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;,</div><div class="line">    &quot;navigationBarTitleText&quot;: &quot;WeChat&quot;,</div><div class="line">    &quot;navigationBarTextStyle&quot;:&quot;black&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5.先做一个小demo(js，json，wxml，wxss都是新建的)<br>代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line">//获取应用实例</div><div class="line">var app = getApp()</div><div class="line">Page(&#123;</div><div class="line">  data:&#123;</div><div class="line">    count:0,</div><div class="line">    text: &apos;加载了了0次&apos;,</div><div class="line">    loadingstatus: false,</div><div class="line">  &#125;,</div><div class="line">  onLoad:function(options)&#123;</div><div class="line">    // 页面初始化 options为页面跳转所带来的参数</div><div class="line">    console.log(&quot;onLoad&quot;);</div><div class="line">    </div><div class="line">  &#125;,</div><div class="line">  onReady:function()&#123;</div><div class="line">    // 页面渲染完成</div><div class="line">    console.log(&quot;onReady&quot;);</div><div class="line">  &#125;,</div><div class="line">  onShow:function()&#123;</div><div class="line">    // 页面显示</div><div class="line">    console.log(&quot;onShow&quot;);</div><div class="line">  &#125;,</div><div class="line">  onHide:function()&#123;</div><div class="line">    // 页面隐藏</div><div class="line">    console.log(&quot;onHide&quot;);</div><div class="line">  &#125;,</div><div class="line">  onUnload:function()&#123;</div><div class="line">    // 页面关闭</div><div class="line">    console.log(&quot;onUnload&quot;);</div><div class="line">  &#125;,</div><div class="line">  button1click: function()&#123;</div><div class="line">   var that = this;</div><div class="line">   that.data.count++;</div><div class="line">   that.setData(&#123; //更改属性的值</div><div class="line">       text:&apos;加载了&apos;+that.data.count+&apos;次&apos;,</div><div class="line">       loadingstatus:that.data.count%2 == 0 ? true:false,</div><div class="line">   &#125;)</div><div class="line">  &#125;,</div><div class="line">&#125;)</div><div class="line"></div><div class="line">//这里的data就是页面的数据和函数，</div><div class="line">onShow,onHide,onReady,onUnload都是生命周期函数，</div><div class="line">button1Click是button的click函数</div><div class="line">这框架是data和页面的绑定起来的，只要改变data的值，页面就会随着变化，这点和iOS有点不同。</div><div class="line"></div><div class="line">button.json 文件</div><div class="line">&#123;</div><div class="line">     &quot;navigationBarTitleText&quot;: &quot;ButtonDemo&quot; 这是页面的title</div><div class="line">&#125;</div><div class="line"></div><div class="line">button.wxml文件</div><div class="line"></div><div class="line">&lt;view class=&quot;container&quot;&gt; </div><div class="line">    &lt;view class=&quot;button-wrapper&quot;&gt;</div><div class="line">    &lt;button type=&quot;default&quot; bindtap=&quot;button1click&quot;  size=&quot;default&quot;  </div><div class="line">    loading=&quot;&#123;&#123;loadingstatus&#125;&#125;&quot; &gt; 点我</div><div class="line">    &lt;/button&gt;</div><div class="line">     &lt;/view&gt;</div><div class="line">&lt;text class=&quot;countClick&quot; id=&quot;text1&quot;&gt;&#123;&#123;text&#125;&#125;</div><div class="line">&lt;/text&gt;</div><div class="line">&lt;/view&gt;</div><div class="line"></div><div class="line">button.wxss</div><div class="line"></div><div class="line">.countClick&#123;</div><div class="line">    margin-top: 100rpx;</div><div class="line">    width: 200rpx;</div><div class="line">    height: 50rpx;</div><div class="line">    text-align: center;</div><div class="line">    font-size: 1em;</div><div class="line">    background-color: cadetblue;</div><div class="line">&#125;</div><div class="line"></div><div class="line"> bindtap=&quot;button1click&quot;  绑定点击事件到buttonclick函数</div><div class="line">&#123;&#123;text&#125;&#125;   &#123;&#123;data中的属性&#125;&#125;</div></pre></td></tr></table></figure></p>
<p>今天还看到一段比较好玩的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">for (var i = 0; i &lt; types.length; ++i) &#123;</div><div class="line">  (function(type) &#123;</div><div class="line">    pageObject[type] = function(e) &#123;</div><div class="line">      var key = type + &apos;Size&apos;</div><div class="line">      var changedData = &#123;&#125;</div><div class="line">      changedData[key] =</div><div class="line">        this.data[key] === &apos;default&apos; ? &apos;mini&apos; : &apos;default&apos;</div><div class="line">      this.setData(changedData)</div><div class="line">    &#125;</div><div class="line">  &#125;)(types[i])</div></pre></td></tr></table></figure></p>
<p>可能做iOS的没看过js的人这点看不太懂，我也是新手，哪里说的不对，欢迎前端大神指正。<br>大概意思是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">for (var i = 0; i &lt; types.length; ++i) &#123; 循环数组</div><div class="line">  (function(type) &#123; //写法js(function)(item)</div><div class="line">    pageObject[type] = function(e) &#123; //添加属性函数 就是增加了几个函数。</div><div class="line">      var key = type + &apos;Size&apos; //拼接字符串</div><div class="line">      var changedData = &#123;&#125; //字典</div><div class="line">      changedData[key] = //字典赋值</div><div class="line">        this.data[key] === &apos;default&apos; ? &apos;mini&apos; : &apos;default&apos;</div><div class="line">      this.setData(changedData) //相当于iOS的kvo用hash值的方式给自己的属性赋值</div><div class="line">    &#125;</div><div class="line">  &#125;)(types[i]) //执行函数</div></pre></td></tr></table></figure></p>
<p>这一个系列的Demo都会在这个仓库哦，欢迎大神吐槽。<br><strong><a href="https://github.com/ifgyong/WeChatDemo" target="_blank" rel="external">demo地址</a></strong></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2016/04/22/Git到CocoaPods看我就够了/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/04/22/Git到CocoaPods看我就够了/" class="post-title-link" itemprop="url">Git到CocoaPods看我就够了</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-04-22 16:39:24" itemprop="dateCreated datePublished" datetime="2016-04-22T16:39:24+08:00">2016-04-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="看了这篇文章你可能"><a href="#看了这篇文章你可能" class="headerlink" title="看了这篇文章你可能"></a>看了这篇文章你可能</h3><ul>
<li>学会Git基本使用</li>
<li>学会在mac上装CocoaPods</li>
<li>提交代码到CocoaPods</li>
<li>代码在CocoaPods的版本迭代</li>
</ul>
<h3 id="git-基本使用"><a href="#git-基本使用" class="headerlink" title="git 基本使用"></a>git 基本使用</h3><p>在<a href="https://github.com" target="_blank" rel="external">github</a>注册账号,然后新建仓库，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git clone git@github.com:ifgyong/FYAlbum.git</div><div class="line">//这里git仓库地址分为https和ssh两种，我是用的ssh的地址。</div></pre></td></tr></table></figure></p>
<p>然后 <code>cd FYAlbum/</code>目录.这个目录就是仓库了，连着github的地址的仓库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">git branch -l //查看所有分支</div><div class="line">git branch &apos;branchName&apos; 新建本地分支</div><div class="line">git status //查看文件状态，哪个修改的会显示出来的</div><div class="line">git add .  //添加所有文件到缓存</div><div class="line">git commit -m &apos;注释&apos; //把添加到缓存的文件提交到本地 仓库</div><div class="line">git push origin master //提交本地的master到远程仓库。</div><div class="line">git tag &apos;tagName&apos; 设置一个tag</div><div class="line">git push --tags //把本地 的tags推送到远程仓库</div><div class="line">git tag  //tag 列表</div><div class="line">git log //git的日志，每次修改的记录</div><div class="line"></div><div class="line">git config --global user.name &quot;YOUR NAME&quot; //配置全局的name</div><div class="line">git config --global user.email &quot;YOUR EMAIL ADDRESS&quot; //配置全局的email</div><div class="line">以后每次提交的时候都是会用这个账号。</div><div class="line">单独为某个仓库配置账号的时候去掉`--glocal`</div><div class="line">就是</div><div class="line">git config   user.name &quot;YOUR NAME&quot; //配置 name</div><div class="line">git config   user.email &quot;YOUR EMAIL ADDRESS&quot; //配置 email</div><div class="line"></div><div class="line">git config -l //查看配置</div><div class="line"></div><div class="line">合并分支：</div><div class="line">git checkout -b dev </div><div class="line">//创建并切换到dev分支 相当于 git branch dev gitcheckout dev 两条命令</div><div class="line"> git merge dev //将dev分支合并到当前分支</div><div class="line">这种方式叫快速合并。</div><div class="line">git branch -d dev //删除分支</div><div class="line"></div><div class="line">用git log --graph命令可以看到分支合并图。</div><div class="line"></div><div class="line"> git merge dev --no-ff// 后边加上`--no-ff`是合并的时候有历史记录，比较稳定。</div><div class="line">当然在合并的时候有冲突怎么办？</div><div class="line"></div><div class="line">解决冲突：</div><div class="line">git status//查看文件状态  冲突文件在这里会有显示的</div><div class="line"></div><div class="line">git diff 文件一  文件二  //对比两个文件，哪个有问题修改哪个。</div><div class="line"></div><div class="line">修改完成之后就可以合并了。` git merge dev --no-ff`</div><div class="line"></div><div class="line">别人提交的文件更新到本地：</div><div class="line">git pull </div><div class="line"></div><div class="line">在每个操作后边可以加上 `--verbose`可以观看过程，就是日志了。</div><div class="line">暂时一般常用的就这么多了。</div></pre></td></tr></table></figure>
<h3 id="在mac上装CocoaPods"><a href="#在mac上装CocoaPods" class="headerlink" title="在mac上装CocoaPods"></a>在mac上装CocoaPods</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install cocoapods</div></pre></td></tr></table></figure>
<p>搜索第三方库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod search AFNetworking</div></pre></td></tr></table></figure></p>
<p>装好了pod 直接<code>cd /user/工作目录</code>,新建<code>Podfile</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod init</div></pre></td></tr></table></figure>
<p>新建Podfile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi Podfile</div></pre></td></tr></table></figure></p>
<p>修改podfile文件内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">platform :ios, &apos;8.0&apos;</div><div class="line">use_frameworks!</div><div class="line">target &apos;MyApp&apos; do</div><div class="line">  pod &apos;AFNetworking&apos;, &apos;~&gt; 2.6&apos;</div><div class="line">  pod &apos;ORStackView&apos;, &apos;~&gt; 3.0&apos;</div><div class="line">  pod &apos;SwiftyJSON&apos;, &apos;~&gt; 2.3&apos;</div><div class="line">end</div><div class="line">上边的AFNetworking，ORStackView，SwiftyJSON 都是名字，后边是版本号。</div></pre></td></tr></table></figure></p>
<p>修改完之后保存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">：wq</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pod setup ///初始化pod仓库</div><div class="line">pod update //更新仓库</div></pre></td></tr></table></figure>
<h3 id="提交代码到CocoaPods"><a href="#提交代码到CocoaPods" class="headerlink" title="提交代码到CocoaPods"></a>提交代码到CocoaPods</h3><h4 id="注册trunk"><a href="#注册trunk" class="headerlink" title="注册trunk"></a>注册trunk</h4><p>具体步骤看<a href="https://guides.cocoapods.org/making/getting-setup-with-trunk.html" target="_blank" rel="external">这里：</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod trunk register fgyong@fgyong.cn &apos;fgyong&apos; --verbose</div></pre></td></tr></table></figure></p>
<p>然后检查注册成功了没<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">pod trunk me</div><div class="line">成功应该是这样的：</div><div class="line">- Name: fgyong </div><div class="line">- Email: fgyong@fgyong.cn</div><div class="line"> - Since: xxxxxxx </div><div class="line">- Pods:  </div><div class="line">- Sessions: - xxxxxx</div></pre></td></tr></table></figure></p>
<h4 id="配置Podspec"><a href="#配置Podspec" class="headerlink" title="配置Podspec"></a><a href="https://guides.cocoapods.org/syntax/podspec.html" target="_blank" rel="external">配置Podspec</a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pod spec create FYong//新建podSpec文件</div><div class="line"></div><div class="line">vi FYong.podspec //用vi 打开</div></pre></td></tr></table></figure>
<p>里面有很多注释，你可以把需要的填写一下或者复制我的修改一下就可以用了。<br>文件里面的必要是属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Pod::Spec.new do |s|</div><div class="line"></div><div class="line">  s.name          = &quot;FYAlbum&quot;</div><div class="line">  s.version       = &quot;1.0.1&quot;</div><div class="line">  s.license       = &quot;MIT&quot;</div><div class="line">  s.summary       = &quot;Fast encryption string used on iOS, which implement by Objective-C.&quot;</div><div class="line">  s.homepage      = &quot;https://github.com/ifgyong/FYAlbum&quot;</div><div class="line">  s.author        = &#123; &quot;fgyong&quot; =&gt; &quot;fgyong@yeah.net&quot; &#125; </div><div class="line">  s.source        = &#123; :git =&gt; &quot;https://github.com/ifgyong/FYAlbum.git&quot;, :tag =&gt; s.version &#125;</div><div class="line">  s.requires_arc  = true           </div><div class="line">   s.source_files  = &quot;FYAlbum/*/*&quot;</div><div class="line">   s.platform      = :ios, &apos;8.0&apos;        </div><div class="line">   s.framework     = &apos;Foundation&apos;, &apos;UIKit&apos;  </div><div class="line">end</div></pre></td></tr></table></figure></p>
<p>上边的<code>s.source_files</code>容易出错，这个路径是相对于podspec的文件路径。<code>FYAbul/*</code>代表FYAbul一级目录下所有文件<code>FYAlbum/*/*</code>代表FYAlbum一级和二级目录下所有文件。</p>
<ul>
<li>tag 和s.version要对应的，不然报错的。</li>
<li>framework直接写上名字就好了。</li>
<li>license是证书类型哦</li>
</ul>
<p>做完这些可以给仓库打上tag 和version了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git tag 1.0.0 // 加上tag</div><div class="line">git push --tags//推到remote</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pod spec lint --verbose  //验证是否成功</div><div class="line">pod lib lint --verbose      //验证是否成功</div><div class="line">git trunk push FYong.spec --verbose //将文件和配置推到trunk上面</div></pre></td></tr></table></figure>
<p>现在验证pod秒就ok了，等到成功了，直接<code>pod search FYong</code>就出现了。大功告成！！！</p>
<h3 id="代码在CocoaPods的版本迭代"><a href="#代码在CocoaPods的版本迭代" class="headerlink" title="代码在CocoaPods的版本迭代"></a>代码在CocoaPods的版本迭代</h3><p>中间验证的时候，你的工程修改文件了，那么这个tag要修改才可以了，否则即使你修改了文件也报同样的错误！！！具体的要求看<a href="https://guides.cocoapods.org/" target="_blank" rel="external">这里</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git tag 1.0.1</div><div class="line">git push --tags</div><div class="line">修改FYong.spec 文件里边的`s.version = 1.0.1`</div><div class="line">git trunk push FYong.spec --verbose //将文件和配置推到trunk上面</div><div class="line">这次就可以成功了！！！</div></pre></td></tr></table></figure></p>
<p>我参考的博文：</p>
<ul>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">廖雪峰</a></li>
<li><a href="https://guides.cocoapods.org" target="_blank" rel="external">guides.cocoapods.org</a></li>
<li><a href="http://www.cnblogs.com/wengzilin/p/4742530.html" target="_blank" rel="external">【原】iOS：手把手教你发布代码到CocoaPods(Trunk方式)</a></li>
</ul>
<p>基本到这里就结束了，是不是还是感觉意犹未尽啊！<br>有什么问题欢迎留言啊！<br><a href="https://github.com/ifgyong/FYAlbum" target="_blank" rel="external">我的项目</a>,如果觉得不错，欢迎✨啊。<br> 欢迎来吐槽啊！！！</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2016/04/13/iOS线程之NSThread/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/04/13/iOS线程之NSThread/" class="post-title-link" itemprop="url">iOS线程之NSThread</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-04-13 11:23:40" itemprop="dateCreated datePublished" datetime="2016-04-13T11:23:40+08:00">2016-04-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前两篇文章已经将了现在主流的GCD和NSOperationQueue,现在我们在聊一下NSThread。</p>
<h3 id="创建NSThread"><a href="#创建NSThread" class="headerlink" title="创建NSThread"></a>创建NSThread</h3><p>方法一 类方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (void)detachNewThreadSelector:(SEL)selector toTarget:(id)target withObject:(nullable id)argument;</div></pre></td></tr></table></figure></p>
<p>方法二 实例方法<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (instancetype)initWithTarget:(id)target selector:(SEL)selector object:(nullable id)argument NS_AVAILABLE(10_5, 2_0);</div></pre></td></tr></table></figure></p>
<p>这两者的区别是 类方法是创建新的线程并且立即启动，而第二个方法是创建线程，但是没有启动，启动需要<code>[thread start]</code>。</p>
<h3 id="获取线程的状态"><a href="#获取线程的状态" class="headerlink" title="获取线程的状态"></a>获取线程的状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">正在执行</div><div class="line">@property (readonly, getter=isExecuting) BOOL executing NS_AVAILABLE(10_5, 2_0);</div><div class="line">完成</div><div class="line">@property (readonly, getter=isFinished) BOOL finished NS_AVAILABLE(10_5, 2_0);</div><div class="line">取消</div><div class="line">@property (readonly, getter=isCancelled) BOOL cancelled NS_AVAILABLE(10_5, 2_0);</div></pre></td></tr></table></figure>
<h3 id="更改线程状态"><a href="#更改线程状态" class="headerlink" title="更改线程状态"></a>更改线程状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">取消</div><div class="line">- (void)cancel NS_AVAILABLE(10_5, 2_0);</div><div class="line">开始</div><div class="line">- (void)start NS_AVAILABLE(10_5, 2_0);</div><div class="line">线程的主函数</div><div class="line">- (void)main NS_AVAILABLE(10_5, 2_0);</div></pre></td></tr></table></figure>
<p>在子线程中想要更新UI怎么办，这里官方直接提供了在子线程执行方法的函数，很实用的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(nullable id)arg waitUntilDone:(BOOL)wait modes:(nullable NSArray&lt;NSString *&gt; *)array;</div><div class="line">在主线程执行</div><div class="line">- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(nullable id)arg waitUntilDone:(BOOL)wait;</div><div class="line"></div><div class="line"> // equivalent to the first method with kCFRunLoopCommonModes</div><div class="line">- (void)performSelector:(SEL)aSelector </div><div class="line">                        onThread:(NSThread *)thr </div><div class="line">                      withObject:(nullable id)arg </div><div class="line">                waitUntilDone:(BOOL)wait </div><div class="line">                              modes:(nullable NSArray&lt;NSString *&gt; *)array NS_AVAILABLE(10_5, 2_0);</div><div class="line">- (void)performSelector:(SEL)aSelector </div><div class="line">                          onThread:(NSThread *)thr</div><div class="line">                       withObject:(nullable id)arg </div><div class="line">                waitUntilDone:(BOOL)wait NS_AVAILABLE(10_5, 2_0);</div><div class="line"> // equivalent to the first method with kCFRunLoopCommonModes</div><div class="line">- (void)performSelectorInBackground:(SEL)aSelector</div><div class="line">                                                  withObject:(nullable id)arg NS_AVAILABLE(10_5, 2_0);</div></pre></td></tr></table></figure></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">- (void)test6&#123;</div><div class="line">    NSThread * thread = [[NSThread alloc]initWithTarget:self selector:@selector(op1) object:nil];</div><div class="line">    thread.name = @&quot;test6&quot;;</div><div class="line">    [thread start];</div><div class="line">    [self performSelectorInBackground:@selector(print) withObject:nil];</div><div class="line">&#125;</div><div class="line">- (void)print&#123;</div><div class="line">    NSLog(@&quot;线程info : %@&quot;,[NSThread currentThread]);</div><div class="line">&#125;</div><div class="line">- (void)op1&#123;</div><div class="line">    </div><div class="line">     NSLog(@&quot;op1 开始运行了&quot;);</div><div class="line">     sleep(3);</div><div class="line"></div><div class="line">     NSLog(@&quot;op1 结束&quot;);</div><div class="line">&#125;</div><div class="line">输出：</div><div class="line">**2016-04-13 10:34:23.515 GCD_Demo[33904:647479] op1 ****开始运行了**</div><div class="line">**2016-04-13 10:34:23.515 GCD_Demo[33904:647480] ****线程****info : &lt;NSThread: 0x7fcc81a1abe0&gt;&#123;number = 3, name = (null)&#125;**</div><div class="line">**2016-04-13 10:34:26.521 GCD_Demo[33904:647479] op1 ****结束**</div></pre></td></tr></table></figure>
<p>从输出结果看出来<code>[self performSelectorInBackground:@selector(print) withObject:nil];</code>又自动生成了子线程并且在子线程执行<code>print</code>函数。</p>
<p>把test6函数改成下面的情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//当waitUntilDone 是yes的时候，是同步执行</div><div class="line"> [self performSelectorOnMainThread:@selector(print) withObject:nil waitUntilDone:NO];</div><div class="line">    _thread = [[NSThread alloc]initWithTarget:self selector:@selector(op1) object:nil];</div><div class="line">    _thread.name = @&quot;test6&quot;;</div><div class="line">    [_thread start];</div><div class="line">    [self performSelectorInBackground:@selector(print) withObject:nil];</div></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">**2016-04-13 10:41:32.534 GCD_Demo[34026:652753] test6 ****开始运行了**</div><div class="line">**2016-04-13 10:41:32.534 GCD_Demo[34026:652754] ****线程****info : &lt;NSThread: 0x7fb7320a1bf0&gt;&#123;number = 3, name = (null)&#125;**</div><div class="line">**2016-04-13 10:41:32.537 GCD_Demo[34026:652708] ****线程****info : &lt;NSThread: 0x7fb730c05a20&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-04-13 10:41:35.539 GCD_Demo[34026:652753] test6 ****结束**</div></pre></td></tr></table></figure></p>
<p><code>[self performSelectorOnMainThread:@selector(print) 
                                                withObject:nil
                                         waitUntilDone:NO];</code><br>waitUntilDone为YES的时候是同步执行代码，为NO的时候异步执行代码。<br><code>[self performSelectorInBackground:@selector(print) withObject:nil];</code>开启子线程执行print函数。</p>
<h3 id="cancel-thread"><a href="#cancel-thread" class="headerlink" title="cancel thread"></a>cancel thread</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (void)test6&#123;</div><div class="line">    _thread = [[NSThread alloc]initWithTarget:self selector:@selector(op1) object:nil];</div><div class="line">    _thread.name = @&quot;test6&quot;;</div><div class="line">    [_thread start];</div><div class="line">    sleep(2);</div><div class="line">    [_thread cancel];</div><div class="line">    if (_thread.cancelled) &#123;</div><div class="line">        NSLog(@&quot;%@ canceld&quot;,_thread.name);</div><div class="line">    &#125; else if(_thread.executing)&#123;</div><div class="line">        NSLog(@&quot;%@ execuitng&quot;,_thread.name);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">**2016-04-13 10:50:46.685 GCD_Demo[34128:657263] test6 ****开始运行了**</div><div class="line">**2016-04-13 10:50:48.686 GCD_Demo[34128:657214] test6 canceld**</div><div class="line">**2016-04-13 10:50:48.692 GCD_Demo[34128:657214] ****线程****info : &lt;NSThread: 0x7ffb34004fb0&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-04-13 10:51:16.689 GCD_Demo[34128:657263] test6 ****结束**</div></pre></td></tr></table></figure></p>
<p>其实thread取消也是在执行中的线程是没办法直接取消的，<code>[thread cancel]</code>紧紧是改了状态，却没有终止线程。和<code>[NSOperation cancel]</code>类似，当你cancel之后，如果线程在执行，那么他会执行完毕，如果线程还没执行，那么他会终止执行。</p>
<p>关于thread的通知<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//将要变成多线程 在有新的线程启动的时候会发送此通知</div><div class="line">FOUNDATION_EXPORT NSString * const NSWillBecomeMultiThreadedNotification;</div><div class="line">//将要变成单独线程  官方标注: Not implemented.【没有实现】</div><div class="line">FOUNDATION_EXPORT NSString * const NSDidBecomeSingleThreadedNotification;</div><div class="line">//线程退出</div><div class="line">FOUNDATION_EXPORT NSString * const NSThreadWillExitNotification;</div><div class="line"></div><div class="line">通过这三个通知可以监测线程的启动和现成的退出。</div><div class="line">//监测线程启动，启动的线程是未知的所以object是nil</div><div class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(becomeMultiNsthread) name:NSWillBecomeMultiThreadedNotification object:nil];</div><div class="line"></div><div class="line">//监测线程退出</div><div class="line">    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(exit:) name:NSThreadWillExitNotification object:nil];</div></pre></td></tr></table></figure></p>
<p>线程的讨论暂时就这么多，有问题我们一起讨论，欢迎留言。。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2016/03/31/iOS线程之NSOperation/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/03/31/iOS线程之NSOperation/" class="post-title-link" itemprop="url">iOS线程之NSOperation</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-03-31 14:47:47" itemprop="dateCreated datePublished" datetime="2016-03-31T14:47:47+08:00">2016-03-31</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前篇文章已经讲了GCD了，那么这两者有什么区别？</p>
<h3 id="GCD-VS-NSOperation"><a href="#GCD-VS-NSOperation" class="headerlink" title="GCD VS   NSOperation"></a>GCD VS   NSOperation</h3><blockquote>
<p>“NSOperationQueue predates Grand Central Dispatch and on iOS it doesn’t use GCD to execute operations (this is different on Mac OS X). It uses regular background threads which have a little more overhead than GCD dispatch queues.<br>On the other hand, NSOperationQueue gives you a lot more control over how your operations are executed. You can define dependencies between individual operations for example, which isn’t possible with plain GCD queues. It is also possible to cancel operations that have been enqueued in an NSOperationQueue (as far as the operations support it). When you enqueue a block in a GCD dispatch queue, it will definitely be executed at some point.<br>To sum it up, NSOperationQueue can be more suitable for long-running operations that may need to be cancelled or have complex dependencies. GCD dispatch queues are better for short tasks that should have minimum performance and memory overhead.”</p>
</blockquote>
<p>简单来说就是GCD偏底层点，性能好，依赖关系少，并发耗费资源少。<br>NSOperation可观察状态，性能也不错，处理事务更简单操作。</p>
<p>对于这两种都熟练运用的人来说，无所谓了，APP大多数事务这两者都能完美解决。至于代码用哪个这个取决于你的兴趣了。</p>
<p>下面详细说一下NSOperation</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">@interface NSOperation : NSObject &#123;</div><div class="line"></div><div class="line">- (void)start; //开始执行 默认是同步执行的</div><div class="line">- (void)main; //主任务的函数 </div><div class="line"></div><div class="line">@property (readonly, getter=isCancelled) BOOL cancelled; //是否取消</div><div class="line">- (void)cancel; //取消任务</div><div class="line"></div><div class="line">@property (readonly, getter=isExecuting) BOOL executing;//是否正在执行</div><div class="line">@property (readonly, getter=isFinished) BOOL finished; //是否完成</div><div class="line">@property (readonly, getter=isConcurrent) BOOL concurrent; // To be deprecated; use and override &apos;asynchronous&apos; below 是否并行</div><div class="line">@property (readonly, getter=isAsynchronous) BOOL asynchronous NS_AVAILABLE(10_8, 7_0); //是否异步</div><div class="line">@property (readonly, getter=isReady) BOOL ready; //是否正在等待</div><div class="line"></div><div class="line">- (void)addDependency:(NSOperation *)op; //添加依赖</div><div class="line">- (void)removeDependency:(NSOperation *)op; //删除依赖关系</div><div class="line"></div><div class="line">@property (readonly, copy) NSArray&lt;NSOperation *&gt; *dependencies; //所有依赖关系的数组</div><div class="line"></div><div class="line">typedef NS_ENUM(NSInteger, NSOperationQueuePriority) &#123;</div><div class="line">//队列优先级  优先级高的先执行 一般设置为0 即 NSOperationQueuePriorityNormal。</div><div class="line"> NSOperationQueuePriorityVeryLow = -8L,</div><div class="line"> NSOperationQueuePriorityLow = -4L,</div><div class="line"> NSOperationQueuePriorityNormal = 0,</div><div class="line"> NSOperationQueuePriorityHigh = 4,</div><div class="line"> NSOperationQueuePriorityVeryHigh = 8</div><div class="line">&#125;;</div><div class="line"></div><div class="line">@property NSOperationQueuePriority queuePriority;//队列优先级</div><div class="line"></div><div class="line">@property (nullable, copy) void (^completionBlock)(void)  NS_AVAILABLE(10_6, 4_0);//完成时候执行的代码块</div><div class="line">//等待直到完成</div><div class="line">- (void)waitUntilFinished NS_AVAILABLE(10_6, 4_0);</div><div class="line">//线程优先级</div><div class="line">@property double threadPriority NS_DEPRECATED(10_6, 10_10, 4_0, 8_0);</div><div class="line"></div><div class="line">@property NSQualityOfService qualityOfService NS_AVAILABLE(10_10, 8_0);</div><div class="line">NSQualityOfService 的几个枚举值：</div><div class="line">  NSQualityOfServiceUserInteractive：最高优先级，主要用于提供交互UI的操作，比如处理点击事件，绘制图像到屏幕上</div><div class="line">  NSQualityOfServiceUserInitiated：次高优先级，主要用于执行需要立即返回的任务</div><div class="line">  NSQualityOfServiceDefault：默认优先级，当没有设置优先级的时候，线程默认优先级</div><div class="line">  NSQualityOfServiceUtility：普通优先级，主要用于不需要立即返回的任务</div><div class="line">  NSQualityOfServiceBackground：后台优先级，用于完全不紧急的任务</div><div class="line"></div><div class="line"></div><div class="line">//名字</div><div class="line">@property (nullable, copy) NSString *name NS_AVAILABLE(10_10, 8_0);</div></pre></td></tr></table></figure>
<h3 id="NSBlockOperation"><a href="#NSBlockOperation" class="headerlink" title="NSBlockOperation"></a>NSBlockOperation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">- (void)print&#123;</div><div class="line">    NSLog(@&quot;线程info : %@&quot;,[NSThread currentThread]);</div><div class="line">&#125;</div><div class="line">- (void)test4&#123;</div><div class="line">    NSBlockOperation * blop = [[NSBlockOperation alloc]init];</div><div class="line">    [blop addExecutionBlock:^&#123;//添加同时执行的task</div><div class="line">        NSLog(@&quot;1 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(2);</div><div class="line">        </div><div class="line">        NSLog(@&quot;1 end&quot;);</div><div class="line">    &#125;];</div><div class="line">    [blop addExecutionBlock:^&#123; //添加同时执行的task</div><div class="line">        NSLog(@&quot;2 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(4);</div><div class="line">        </div><div class="line">        NSLog(@&quot;2 end&quot;);</div><div class="line">    &#125;];</div><div class="line">    [blop addExecutionBlock:^&#123; //添加同时执行的task</div><div class="line">        NSLog(@&quot;3 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(1);</div><div class="line">        </div><div class="line">        NSLog(@&quot;3 end&quot;);</div><div class="line">    &#125;];</div><div class="line">    [blop setCompletionBlock:^&#123; //添加同时执行的task</div><div class="line">        NSLog(@&quot;blop end&quot;);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    [blop start];</div><div class="line">&#125;</div><div class="line">输出：</div><div class="line">**2016-03-29 16:47:44.857 GCD_Demo[17555:562249] 1 start**</div><div class="line">**2016-03-29 16:47:44.857 GCD_Demo[17555:562287] 3 start**</div><div class="line">**2016-03-29 16:47:44.857 GCD_Demo[17555:562288] 2 start**</div><div class="line">**2016-03-29 16:47:44.857 GCD_Demo[17555:562249] ****线程****info : &lt;NSThread: 0x7fea68408b30&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-03-29 16:47:44.857 GCD_Demo[17555:562288] ****线程****info : &lt;NSThread: 0x7fea6861fb30&gt;&#123;number = 3, name = (null)&#125;**</div><div class="line">**2016-03-29 16:47:44.857 GCD_Demo[17555:562287] ****线程****info : &lt;NSThread: 0x7fea69300470&gt;&#123;number = 2, name = (null)&#125;**</div><div class="line">**2016-03-29 16:47:45.922 GCD_Demo[17555:562287] 3 end**</div><div class="line">**2016-03-29 16:47:46.858 GCD_Demo[17555:562249] 1 end**</div><div class="line">**2016-03-29 16:47:48.928 GCD_Demo[17555:562288] 2 end**</div><div class="line">**2016-03-29 16:47:48.929 GCD_Demo[17555:562288] blop end**</div></pre></td></tr></table></figure>
<p>可以看出来，NSBlockOperation当任务是1的时候在main线程中执行，任务大于1的时候，其他的个自独自开了线程，而且互不影响。</p>
<h3 id="依赖关系"><a href="#依赖关系" class="headerlink" title="依赖关系"></a>依赖关系</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">- (void)print&#123;</div><div class="line">    NSLog(@&quot;线程info : %@&quot;,[NSThread currentThread]);</div><div class="line">&#125;</div><div class="line">- (void)test4&#123;</div><div class="line">    NSBlockOperation * blop = [[NSBlockOperation alloc]init];</div><div class="line">    [blop addExecutionBlock:^&#123;</div><div class="line">        NSLog(@&quot;blop1_1 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;blop1_1 end&quot;);</div><div class="line">    &#125;];</div><div class="line">    [blop addExecutionBlock:^&#123;</div><div class="line">        NSLog(@&quot;blop1_2 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(4);</div><div class="line">        NSLog(@&quot;blop1_2 end&quot;);</div><div class="line">    &#125;];</div><div class="line">    NSLog(@&quot;blop will start&quot;);</div><div class="line">    [blop start];</div><div class="line">    NSLog(@&quot;blop did start&quot;);</div><div class="line">    </div><div class="line">    NSBlockOperation * blop2 =[NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">        NSLog(@&quot;blop2 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;blop2 end&quot;);</div><div class="line">    &#125;];</div><div class="line">   // [blop2 addDependency:blop];//blop2 依赖blop 就是blopExecutionBlock 执行完之后再执行blop2的任务【blop2 执行task和blop 的CompletionBlock基本是同时执行的】</div><div class="line">    [blop2 start];</div><div class="line">输出：</div><div class="line">**2016-03-29 17:06:53.217 GCD_Demo[17806:574416] blop will start**</div><div class="line">**2016-03-29 17:06:53.217 GCD_Demo[17806:574416] blop1_1 start**</div><div class="line">**2016-03-29 17:06:53.217 GCD_Demo[17806:574455] blop1_2 start**</div><div class="line">**2016-03-29 17:06:53.217 GCD_Demo[17806:574416] ****线程****info : &lt;NSThread: 0x7f839a004ff0&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-03-29 17:06:53.218 GCD_Demo[17806:574455] ****线程****info : &lt;NSThread: 0x7f8398416d80&gt;&#123;number = 2, name = (null)&#125;**</div><div class="line">**2016-03-29 17:06:55.219 GCD_Demo[17806:574416] blop1_1 end**</div><div class="line">**2016-03-29 17:06:57.272 GCD_Demo[17806:574455] blop1_2 end**</div><div class="line">**2016-03-29 17:06:57.272 GCD_Demo[17806:574416] blop did start**</div><div class="line">**2016-03-29 17:06:57.273 GCD_Demo[17806:574416] blop2 start**</div><div class="line">**2016-03-29 17:06:57.273 GCD_Demo[17806:574416] ****线程****info : &lt;NSThread: 0x7f839a004ff0&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-03-29 17:06:59.274 GCD_Demo[17806:574416] blop2 end**</div></pre></td></tr></table></figure>
<p>从输出的信息可以看出来，block是同步执行的，虽然多任务是多线程，但是主线程还是在阻塞中，只有上一个所有 task 执行完的时候，才会执行下边的task。所以在这里依赖关系不那么重要了，注释掉运行结果也一样的。</p>
<h3 id="NSInvocationOperation"><a href="#NSInvocationOperation" class="headerlink" title="NSInvocationOperation"></a>NSInvocationOperation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NSInvocationOperation 是NSOperation的子类，负责实现operation的SEL方法。</div><div class="line">这样子operation就可以start的时候执行一些函数了。</div><div class="line">在swift中已经废弃</div><div class="line">看文档：</div><div class="line">NS_SWIFT_UNAVAILABLE(&quot;NSInvocation and related APIs not available&quot;)</div></pre></td></tr></table></figure>
<h3 id="NSOperationQueue"><a href="#NSOperationQueue" class="headerlink" title="NSOperationQueue"></a>NSOperationQueue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line">//添加操作</div><div class="line">- (void)addOperation:(NSOperation *)op;</div><div class="line">//添加操作数组 在完成操作的时候</div><div class="line">- (void)addOperations:(NSArray&lt;NSOperation *&gt; *)ops waitUntilFinished:(BOOL)wait NS_AVAILABLE(10_6, 4_0);</div><div class="line">//添加携带代码块的operation</div><div class="line">- (void)addOperationWithBlock:(void (^)(void))block NS_AVAILABLE(10_6, 4_0);</div><div class="line">//所有的操作 组成的数组 可读属性</div><div class="line">@property (readonly, copy) NSArray&lt;__kindof NSOperation *&gt; *operations;</div><div class="line">//操作个数</div><div class="line">@property (readonly) NSUInteger operationCount NS_AVAILABLE(10_6, 4_0);</div><div class="line">//设置最大并行的任务数 ps:operation 其实 一个operation可以同时开启几个线程的。</div><div class="line">@property NSInteger maxConcurrentOperationCount;</div><div class="line">//挂起</div><div class="line">@property (getter=isSuspended) BOOL suspended;</div><div class="line">//队列的名字</div><div class="line">@property (nullable, copy) NSString *name NS_AVAILABLE(10_6, 4_0);</div><div class="line">//优先级</div><div class="line">@property NSQualityOfService qualityOfService NS_AVAILABLE(10_10, 8_0);</div><div class="line">队列</div><div class="line">@property (nullable, assign /* actually retain */) dispatch_queue_t underlyingQueue NS_AVAILABLE(10_10, 8_0);</div><div class="line">//取消所有的操作</div><div class="line">- (void)cancelAllOperations;</div><div class="line">//等到他们的操作结束</div><div class="line">- (void)waitUntilAllOperationsAreFinished;</div><div class="line">//当前的队列</div><div class="line">+ (nullable NSOperationQueue *)currentQueue NS_AVAILABLE(10_6, 4_0);</div><div class="line">//主队列</div><div class="line">+ (NSOperationQueue *)mainQueue NS_AVAILABLE(10_6, 4_0);</div><div class="line"></div><div class="line"> </div><div class="line"># 队列的例子</div><div class="line">#队列中添加的operation都是在子线程中执行的。</div><div class="line">- (void)print&#123;</div><div class="line">    NSLog(@&quot;线程info : %@&quot;,[NSThread currentThread]);</div><div class="line">&#125;</div><div class="line">- (void)op1&#123;</div><div class="line">     NSLog(@&quot;op1 开始运行了&quot;);</div><div class="line">     sleep(3);</div><div class="line">     NSLog(@&quot;op1 结束&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)test5&#123;</div><div class="line">    NSInvocationOperation * op1 =[[NSInvocationOperation alloc]initWithTarget:self selector:@selector(op1) object:nil];</div><div class="line">    NSOperationQueue * queue =[[NSOperationQueue alloc]init];</div><div class="line">    [queue addOperation:op1]; //添加操作</div><div class="line">    queue.maxConcurrentOperationCount = 1;//同时允许一个operation运行</div><div class="line">    NSBlockOperation *block = [self test4];//任务块</div><div class="line">    [queue addOperation:block];//添加任务块并运行</div><div class="line"></div><div class="line">// sleep(2);  </div><div class="line">   // [queue cancelAllOperations];</div><div class="line">&#125;</div><div class="line">- (NSBlockOperation *)test4&#123;</div><div class="line">    NSBlockOperation * blop = [[NSBlockOperation alloc]init];</div><div class="line">    [blop addExecutionBlock:^&#123;</div><div class="line">        NSLog(@&quot;blop1_1 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;blop1_1 end&quot;);</div><div class="line">    &#125;];</div><div class="line">    [blop addExecutionBlock:^&#123;</div><div class="line">        NSLog(@&quot;blop1_2 start&quot;);</div><div class="line">        [self print];</div><div class="line">        sleep(4);</div><div class="line">        NSLog(@&quot;blop1_2 end&quot;);</div><div class="line">    &#125;];</div><div class="line">    return blop;</div><div class="line">&#125;</div><div class="line">输出：</div><div class="line">**2016-03-31 11:22:16.663 GCD_Demo[26038:889212] op1 ****开始运行了**</div><div class="line">**2016-03-31 11:22:19.737 GCD_Demo[26038:889212] op1 ****结束**</div><div class="line">**2016-03-31 11:22:19.738 GCD_Demo[26038:889213] blop1_1 start**</div><div class="line">**2016-03-31 11:22:19.738 GCD_Demo[26038:889226] blop1_2 start**</div><div class="line">**2016-03-31 11:22:19.738 GCD_Demo[26038:889213] ****线程****info : &lt;NSThread: 0x7fea3061d110&gt;&#123;number = 2, name = (null)&#125;**</div><div class="line">**2016-03-31 11:22:19.738 GCD_Demo[26038:889226] ****线程****info : &lt;NSThread: 0x7fea31800140&gt;&#123;number = 3, name = (null)&#125;**</div><div class="line">**2016-03-31 11:22:21.808 GCD_Demo[26038:889213] blop1_1 end**</div><div class="line">**2016-03-31 11:22:23.784 GCD_Demo[26038:889226] blop1_2 end**</div><div class="line"># 从输出的信息可以看出来，当设置最大的operation为1的时候，相当于这个队列同步运行了，不过这个同步的单位不是线程，而是operation。</div><div class="line"></div><div class="line">当把这两句代码加到 test5最后边输出结果是：</div><div class="line">**2016-03-31 11:28:59.267 GCD_Demo[26113:892737] op1 ****开始运行了**</div><div class="line">**2016-03-31 11:29:02.341 GCD_Demo[26113:892737] op1 ****结束**</div><div class="line">从输出结果得出：正在执行的Operation无法stop，正在ready的operation直接跳过start，执行complateBlock.状态由ready改为canceld。ps：注意看官方文档</div><div class="line">`Canceling the operations does not automatically remove them from the queue or stop those that are currently executing.`</div><div class="line">正在执行的不会从队列中删除也不会stop。</div><div class="line">`For operations that are queued and waiting execution, the queue must still attempt to execute the operation before recognizing that it is canceled and moving it to the finished state. </div><div class="line">For operations that are already executing, the operation object itself must check for cancellation and stop what it is doing so that it can move to the finished state. </div><div class="line">In both cases, a finished (or canceled) operation is still given a chance to execute its completion block before it is removed from the queue.` </div><div class="line">正在队列中等待的operation执行的时候会检测是否被cancenld，如果状态是canceld，那么直接执行completion block 在它被队列删除的时候。</div></pre></td></tr></table></figure>
<h3 id="在子线程中耗时的操作完成了，那么该在主线程中更新UI"><a href="#在子线程中耗时的操作完成了，那么该在主线程中更新UI" class="headerlink" title="在子线程中耗时的操作完成了，那么该在主线程中更新UI"></a>在子线程中耗时的操作完成了，那么该在主线程中更新UI</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">#将上面的test5 改成下面的代码</div><div class="line">- (void)test5&#123;</div><div class="line">    NSInvocationOperation * op1 =[[NSInvocationOperation alloc]initWithTarget:self selector:@selector(op1) object:nil];</div><div class="line">    NSOperationQueue * queue =[[NSOperationQueue alloc]init];</div><div class="line">    [queue addOperation:op1];</div><div class="line">    queue.maxConcurrentOperationCount = 3;//根据需要设置数量</div><div class="line">    NSBlockOperation *block = [self test4];</div><div class="line">    [queue addOperation:block];</div><div class="line">//这句话一定要添加，这句话的意思等到所有的operation都完成了在执行后面的代码，</div><div class="line">其实就是上面的操作执行到这里要等待他们直到他们都完成了。</div><div class="line">#     [queue waitUntilAllOperationsAreFinished]; </div><div class="line">    NSBlockOperation * blockUpdateMainUI=[NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">        NSLog(@&quot;update UI&quot;);</div><div class="line">    &#125;];</div><div class="line">    [[NSOperationQueue mainQueue] addOperation:blockUpdateMainUI];//在主队列中执行更新UI的操作</div><div class="line">&#125;</div><div class="line">上面的代码 和GCD中的分组有些类似，但是 这个OperationQueue基本单位是operation而不是线程，一定要理解。</div><div class="line">operation和线程的关系是 一个operation可能对应多个线程，也可能对应一个线程。</div></pre></td></tr></table></figure>
<p>关于NSOperationQueue的了解和使用我想到的基本就这么多场景，后期有其他的场景再补充。<br>预告：下期节目是NSThread的介绍和使用。<br>ps:广告时间</p>
<hr>
<p>有问题可以发我邮箱讨论共同交流技术。<br>fgyong@yeah.net</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fgyong.cn/2016/03/28/iOS线程之GCD初探/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="兜兜转转"/>
      <meta itemprop="description" content="在学习的路上，不忘初心 方得始终"/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兜兜转转的技术博客"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/03/28/iOS线程之GCD初探/" class="post-title-link" itemprop="url">iOS线程之GCD初探</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-03-28 17:47:47" itemprop="dateCreated datePublished" datetime="2016-03-28T17:47:47+08:00">2016-03-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-12-03 12:48:00" itemprop="dateModified" datetime="2019-12-03T12:48:00+08:00">2019-12-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>简述：<br>       说道线程，离不开并行和串行，所谓并行，就是100赛跑，每个赛道就是一个线程，每个线程之间互不影响，同时都可以运行事件，就是10个赛道都可以有运动员跑步了，谁跑的慢或者跑的快，都不影响其他的人。串行就不一样了，串行是1个赛道10个运动员再跑接力赛，第一个跑到终点第二个在接着跑，依次类推，前边的不走，后边的也走不了的，所以串行上面的事件是一个一个运行的，同时只能是一个人再跑。</p>
<p>在iOS或者OS里面，一般用GCD就能吃处理较多的事务，下面就谈一下GCD的用法。</p>
<h3 id="什么是GCD？"><a href="#什么是GCD？" class="headerlink" title="什么是GCD？"></a>什么是GCD？</h3><p>全称是Grand Central Dispatch，可译为“牛逼的中枢调度器”<br>纯C语言，提供了非常多强大的函数</p>
<h3 id="methodList-info"><a href="#methodList-info" class="headerlink" title="methodList info"></a>methodList info</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//获取主线程 就是更新UI的线程</div><div class="line">dispatch_queue_t dispatch_get_main_queue(void);</div><div class="line"></div><div class="line"> //获取全局队列</div><div class="line">dispatch_queue_t dispatch_get_global_queue( long identifier, unsigned long flags);</div><div class="line"></div><div class="line">//创建一个队列 名字是label 属性可以写为NULL  </div><div class="line">dispatch_queue_t dispatch_queue_create( const char *label dispatch_queue_attr_t attr);</div><div class="line">dispatch_release(queue)//释放队列</div><div class="line"></div><div class="line">//获取代码现在运行的queue</div><div class="line">dispatch_queue_t dispatch_get_current_queue( void);</div><div class="line"></div><div class="line"> //获取队列的名字</div><div class="line">const char * dispatch_queue_get_label(dispatch_queue_t queue);</div><div class="line"></div><div class="line">//异步把代码块block交给queue队列中处理</div><div class="line">dispatch_async(dispatch_queue_t queue, dispatch_block_t block);</div><div class="line"></div><div class="line">// 同步将block加入到queue中并且执行。</div><div class="line">void dispatch_sync( dispatch_queue_t queue, dispatch_block_t block);</div><div class="line"></div><div class="line"> //block 在指定时间在queue中执行</div><div class="line">void dispatch_after( dispatch_time_t when, dispatch_queue_t queue, dispatch_block_t block);</div><div class="line"></div><div class="line"> </div><div class="line">//几个调度事件同事加入到queue中去，最好是全局队列才行。</div><div class="line">void dispatch_apply( size_t iterations, dispatch_queue_t queue, void (^block)( size_t));</div><div class="line"></div><div class="line">// block 是否执行过</div><div class="line">void dispatch_once( dispatch_once_t *predicate, dispatch_block_t block);</div><div class="line"> </div><div class="line">//在分组group中的queue队列执行block</div><div class="line">void dispatch_group_async( dispatch_group_t group, dispatch_queue_t queue, dispatch_block_t block);</div><div class="line"></div><div class="line">//创建线程分组</div><div class="line">dispatch_group_t dispatch_group_create( void);</div><div class="line"></div><div class="line"> //分组的计数+1</div><div class="line">void dispatch_group_enter( dispatch_group_t group);</div><div class="line"></div><div class="line">//分组计数 -1</div><div class="line">void dispatch_group_leave( dispatch_group_t group);</div><div class="line"></div><div class="line">// 当分组中的事务处理完了执行block</div><div class="line">void dispatch_group_notify( dispatch_group_t group, dispatch_queue_t queue, dispatch_block_t block);</div><div class="line"></div><div class="line">//等待timeout时间后执行 group中的事务</div><div class="line">long dispatch_group_wait( dispatch_group_t group, dispatch_time_t timeout);</div><div class="line"></div><div class="line"> //并行状态下 queue前面的并行事务处理完成了在执行block，然后执行下边的并行代码</div><div class="line">//比如 ABCDEF D事务等到ABC都完成了在执行EF事务的</div><div class="line">void dispatch_barrier_async( dispatch_queue_t queue, dispatch_block_t block);</div></pre></td></tr></table></figure>
<h3 id="实战演练全局队列"><a href="#实战演练全局队列" class="headerlink" title="实战演练全局队列"></a>实战演练全局队列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line"></div><div class="line">dispatch_async(queue, ^&#123;</div><div class="line">        //异步执行</div><div class="line">        dispatch_sync(dispatch_get_main_queue(), ^&#123;</div><div class="line">            //这里面更新UI</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_sync(queue, ^&#123;</div><div class="line">       //同步执行</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="自定义队列"><a href="#自定义队列" class="headerlink" title="自定义队列"></a>自定义队列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queue = dispatch_queue_create(&quot;com.apple.fgyong&quot;, DISPATCH_QUEUE_SERIAL);</div><div class="line">    //</div><div class="line">//#define DISPATCH_QUEUE_SERIAL   同步队列</div><div class="line">//#define DISPATCH_QUEUE_CONCURRENT 异步队列</div><div class="line">    dispatch_async(queue, ^&#123;</div><div class="line">        NSLog(@&quot;下载图片1=====%@&quot;,[NSThread currentThread]);</div><div class="line">    &#125;);</div><div class="line">    dispatch_async(queue, ^&#123;</div><div class="line">        NSLog(@&quot;下载图片2=====%@&quot;,[NSThread currentThread]);</div><div class="line">    &#125;);</div><div class="line">    dispatch_async(queue, ^&#123;</div><div class="line">        NSLog(@&quot;下载图片3=====%@&quot;,[NSThread currentThread]);</div><div class="line">    &#125;);</div><div class="line">    NSLog(@&quot;main:%@&quot;,[NSThread mainThread]);</div><div class="line">当queue属性为 DISPATCH_QUEUE_CONCURRENT输出：</div><div class="line">**2016-03-28 16:53:25.848 GCD_Demo[12338:347984] ****下载图片****3=====&lt;NSThread: 0x7fabda100250&gt;&#123;number = 4, name = (null)&#125;**</div><div class="line">**2016-03-28 16:53:25.848 GCD_Demo[12338:347982] ****下载图片****2=====&lt;NSThread: 0x7fabda2008a0&gt;&#123;number = 3, name = (null)&#125;**</div><div class="line">**2016-03-28 16:53:25.848 GCD_Demo[12338:347937] main:&lt;NSThread: 0x7fabd8c04ee0&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-03-28 16:53:25.848 GCD_Demo[12338:347981] ****下载图片****1=====&lt;NSThread: 0x7fabd8c0a010&gt;&#123;number = 2, name = (null)&#125;** 线程达到了4个</div><div class="line">当queue属性为DISPATCH_QUEUE_SERIAL输出：</div><div class="line">**2016-03-28 16:46:54.501 GCD_Demo[12272:344348] main:&lt;NSThread: 0x7fd379704cf0&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-03-28 16:46:54.501 GCD_Demo[12272:344382] ****下载图片****1=====&lt;NSThread: 0x7fd37971bda0&gt;&#123;number = 2, name = (null)&#125;**</div><div class="line">**2016-03-28 16:46:54.502 GCD_Demo[12272:344382] ****下载图片****2=====&lt;NSThread: 0x7fd37971bda0&gt;&#123;number = 2, name = (null)&#125;**</div><div class="line">**2016-03-28 16:46:54.502 GCD_Demo[12272:344382] ****下载图片****3=====&lt;NSThread: 0x7fd37971bda0&gt;&#123;number = 2, name = (null)&#125;**</div><div class="line">线程只有2个</div></pre></td></tr></table></figure>
<h3 id="多个异步线程问题"><a href="#多个异步线程问题" class="headerlink" title="多个异步线程问题"></a>多个异步线程问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"># 当ABC 3个异步线程，要求前两个个执行完再去执行后面的三个的时候例子：</div><div class="line">     dispatch_queue_t queue = dispatch_queue_create(&quot;com.apple.fgyong&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line"></div><div class="line">    dispatch_async(queue, ^&#123;</div><div class="line">        NSLog(@&quot;queue1 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;queue1 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_async(queue, ^&#123;</div><div class="line">        NSLog(@&quot;queue2 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;queue2 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_barrier_sync(queue, ^&#123;</div><div class="line">        NSLog(@&quot;main:%@&quot;,[NSThread mainThread]);</div><div class="line">    &#125;);</div><div class="line">    dispatch_async(queue, ^&#123;</div><div class="line">        NSLog(@&quot;queue3 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;queue3 end&quot;);</div><div class="line">    &#125;);</div><div class="line">输出：</div><div class="line"></div><div class="line">**2016-03-28 17:01:01.319 GCD_Demo[12463:353702] queue2 begin**</div><div class="line">**2016-03-28 17:01:01.319 GCD_Demo[12463:353703] queue1 begin**</div><div class="line">**2016-03-28 17:01:03.324 GCD_Demo[12463:353703] queue1 end**</div><div class="line">**2016-03-28 17:01:03.324 GCD_Demo[12463:353702] queue2 end**</div><div class="line">**2016-03-28 17:01:03.325 GCD_Demo[12463:353657] main:&lt;NSThread: 0x7f97ea604bf0&gt;&#123;number = 1, name = main&#125;**</div><div class="line">**2016-03-28 17:01:03.325 GCD_Demo[12463:353702] queue3 begin**</div><div class="line">**2016-03-28 17:01:05.330 GCD_Demo[12463:353702] queue3 end**</div></pre></td></tr></table></figure>
<h3 id="线程分组"><a href="#线程分组" class="headerlink" title="线程分组"></a>线程分组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"># 当多个任务同时进行的时候，也可以用group，ABCD任务进行完成的时候，最后在执行task。</div><div class="line"> </div><div class="line"></div><div class="line">  dispatch_queue_t queue = dispatch_queue_create(&quot;com.apple.fgyong&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">    dispatch_group_t group = dispatch_group_create();</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task1 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;task1 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task2 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;task2 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_notify(group, queue, ^&#123;</div><div class="line">        NSLog(@&quot;=================&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task3 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;task3 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task4 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;task4 end&quot;);</div><div class="line">    &#125;);</div><div class="line">输出：</div><div class="line">**2016-03-28 17:08:45.002 GCD_Demo[12557:357162] task1 begin**</div><div class="line">**2016-03-28 17:08:45.002 GCD_Demo[12557:357164] task4 begin**</div><div class="line">**2016-03-28 17:08:45.002 GCD_Demo[12557:357161] task2 begin**</div><div class="line">**2016-03-28 17:08:45.002 GCD_Demo[12557:357163] task3 begin**</div><div class="line">**2016-03-28 17:08:47.005 GCD_Demo[12557:357162] task1 end**</div><div class="line">**2016-03-28 17:08:47.005 GCD_Demo[12557:357163] task3 end**</div><div class="line">**2016-03-28 17:08:47.005 GCD_Demo[12557:357164] task4 end**</div><div class="line">**2016-03-28 17:08:47.005 GCD_Demo[12557:357161] task2 end**</div><div class="line">**2016-03-28 17:08:47.006 GCD_Demo[12557:357161] =================**</div><div class="line">一个组内的所有任务都进行完了才会执行task的函数。</div><div class="line"></div><div class="line"></div><div class="line"># 分组多任务等待 ABCDEF ，ABCD执行5秒，5秒之后就执行EF任务，不管ABCD是否成功。</div><div class="line"></div><div class="line">    dispatch_queue_t queue = dispatch_queue_create(&quot;com.apple.fgyong&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">    dispatch_group_t group = dispatch_group_create();</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task1 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;task1 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task2 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;task2 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_notify(group, queue, ^&#123;</div><div class="line">        NSLog(@&quot;=================&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task3 begin&quot;);</div><div class="line">        sleep(6);</div><div class="line">        NSLog(@&quot;task3 end&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_wait(group, dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5*NSEC_PER_SEC)));</div><div class="line">    NSLog(@&quot;all end&quot;);</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;task4 begin&quot;);</div><div class="line">        sleep(2);</div><div class="line">        NSLog(@&quot;task4 end&quot;);</div><div class="line">    &#125;);</div><div class="line">输出：</div><div class="line"># 代码执行到wait的时候会等待5秒之后再执行wait下边的代码，和sleep有点相似。</div><div class="line">**2016-03-28 17:26:31.335 GCD_Demo[12745:366983] task3 begin**</div><div class="line">**2016-03-28 17:26:31.335 GCD_Demo[12745:366978] task1 begin**</div><div class="line">**2016-03-28 17:26:31.335 GCD_Demo[12745:366979] task2 begin**</div><div class="line">**2016-03-28 17:26:33.340 GCD_Demo[12745:366978] task1 end**</div><div class="line">**2016-03-28 17:26:33.340 GCD_Demo[12745:366979] task2 end**</div><div class="line">**2016-03-28 17:26:36.336 GCD_Demo[12745:366894] all end**</div><div class="line">**2016-03-28 17:26:36.336 GCD_Demo[12745:366979] task4 begin**</div><div class="line">**2016-03-28 17:26:37.340 GCD_Demo[12745:366983] task3 end**</div><div class="line">**2016-03-28 17:26:38.342 GCD_Demo[12745:366979] task4 end**</div><div class="line">**2016-03-28 17:26:38.342 GCD_Demo[12745:366983] =================**</div></pre></td></tr></table></figure>
<h3 id="同时处理多数据不管顺序"><a href="#同时处理多数据不管顺序" class="headerlink" title="同时处理多数据不管顺序"></a>同时处理多数据不管顺序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">          dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">    </div><div class="line">    </div><div class="line">          /*! dispatch_apply函数说明</div><div class="line">           10      *</div><div class="line">           11      *  @brief  dispatch_apply函数是dispatch_sync函数和Dispatch Group的关联API</div><div class="line">           12      *         该函数按指定的次数将指定的Block追加到指定的Dispatch Queue中,并等到全部的处理执行结束</div><div class="line">           13      *</div><div class="line">           14      *  @param 10    指定重复次数  指定10次</div><div class="line">           15      *  @param queue 追加对象的Dispatch Queue</div><div class="line">           16      *  @param index 带有参数的Block, index的作用是为了按执行的顺序区分各个Block</div><div class="line">           17      *</div><div class="line">           18      */</div><div class="line">          dispatch_apply(10, queue, ^(size_t index) &#123;</div><div class="line">                  NSLog(@&quot;%d&quot;, index);</div><div class="line">              </div><div class="line">              &#125;);</div><div class="line">          NSLog(@&quot;done&quot;);</div><div class="line">输出：</div><div class="line"># 这个和上边讲的分组类似，多事务处理，处理结束后再执行代码。</div><div class="line"># 这个是同步的，代码按顺序执行，分组的是异步执行的block</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372458] 1**</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372463] 5**</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372429] 4**</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372464] 6**</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372465] 7**</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372462] 2**</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372457] 0**</div><div class="line">**2016-03-28 17:36:35.698 GCD_Demo[12857:372461] 3**</div><div class="line">**2016-03-28 17:36:35.699 GCD_Demo[12857:372458] 8**</div><div class="line">**2016-03-28 17:36:35.699 GCD_Demo[12857:372429] 9**</div><div class="line">**2016-03-28 17:36:35.699 GCD_Demo[12857:372429] done**</div></pre></td></tr></table></figure>
<p>参考文章：<a href="https://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/index.html#//apple_ref/c/macro/DISPATCH_QUEUE_CONCURRENT" target="_blank" rel="external">Grand Central Dispatch (GCD) Reference</a><br>GCD提供的接口蛮多的,适用场景还是要熟练掌握，才能运用自如。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">兜兜转转</p>
              <div class="site-description motion-element" itemprop="description">在学习的路上，不忘初心 方得始终</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">42</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">兜兜转转</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.4.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.0"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
